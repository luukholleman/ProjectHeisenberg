<!doctype html>
<html>
<head>
    {% load staticfiles %}
    <title>Punktlich</title>

    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">

    <!-- web app settings -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Punktlich">

    <!-- apple touch icons -->
    <link href="{{ STATIC_URL }}img/180.png" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/152.png" sizes="152x152" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/144.png" sizes="144x144" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/120.png" sizes="120x120" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/114.png" sizes="114x114" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/76.png" sizes="76x76" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/72.png" sizes="72x72" rel="apple-touch-icon">
    <link href="{{ STATIC_URL }}img/57.png" sizes="57x57" rel="apple-touch-icon">

    <!-- apple touch startup images -->
    <link href="{{ STATIC_URL }}img/1536x2008.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (orientation: portrait)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/1496x2048.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (orientation: landscape)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/768x1004.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (orientation: portrait)
                 and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/748x1024.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (orientation: landscape)
                 and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/640x1096.png"
          media="(device-width: 320px) and (device-height: 568px)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/640x920.png"
          media="(device-width: 320px) and (device-height: 480px)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <link href="{{ STATIC_URL }}img/320x460.png"
          media="(device-width: 320px) and (device-height: 480px)
                 and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">

    <!-- web components -->
    <script src="{{ STATIC_URL }}bower/webcomponentsjs/webcomponents.js"></script>

    <link rel="import" href="{{ STATIC_URL }}bower/polymer/polymer.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-icons/core-icons.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-toolbar/core-toolbar.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-media-query/core-media-query.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-menu/core-menu.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-list/core-list.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-item/core-item.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-scaffold/core-scaffold.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-pages/core-pages.html">
    <link rel="import" href="{{ STATIC_URL }}bower/core-drawer-panel/core-drawer-panel.html">

    <link rel="import" href="{{ STATIC_URL }}bower/paper-input/paper-input.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-button/paper-button.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-toast/paper-toast.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-fab/paper-fab.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-dropdown/paper-dropdown.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-dropdown-menu/paper-dropdown-menu.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-item/paper-item.html">
    <link rel="import" href="{{ STATIC_URL }}bower/paper-dialog/paper-dialog.html">

    <link rel="import" href="{{ STATIC_URL }}elements/form-box.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-filter-box.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-card.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-file.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-circle.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-dropdown.html">
    <link rel="import" href="{{ STATIC_URL }}elements/punkt-filter-user.html">

    <link rel="import" href="{{ STATIC_URL }}elements/timeline-container/timeline-container.html">
    <link rel="import" href="{{ STATIC_URL }}elements/timeline-container/timeline-node.html">
    <link rel="import" href="{{ STATIC_URL }}elements/timeline-filter.html">

    <!-- Angular CSS dependencies -->
    <link rel="stylesheet" href="{{ STATIC_URL }}bower/angular-loading-bar/src/loading-bar.css">

    <!-- Angular dependencies -->
    <script src="{{ STATIC_URL }}bower/angular/angular.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/angular-route/angular-route.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/angular-resource/angular-resource.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/angular-ui-router/release/angular-ui-router.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/restangular/dist/restangular.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/underscore/underscore.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/moment/moment.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}bower/angular-loading-bar/src/loading-bar.js" type="text/javascript"></script>

    <!-- Main -->
    <link href="{{ STATIC_URL }}sass/main.css" rel="stylesheet">
    <script src="{{ STATIC_URL }}app/app.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/localizationService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/routes.js" type="text/javascript"></script>

    <!-- Models -->
    <script src="{{ STATIC_URL }}app/models/team.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/models/user.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/models/meeting.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/models/attachment.js" type="text/javascript"></script>

    <!-- Controllers -->
    <script src="{{ STATIC_URL }}app/controllers/mainController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/authenticationController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/timelineController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/activationController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/createController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/updateController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/detailController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/listController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/fileDetailController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/meeting/attachmentDetailController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/team/updateController.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/controllers/offCanvasMenuController.js" type="text/javascript"></script>

    <!-- Factories and services -->
    <script src="{{ STATIC_URL }}app/services/authenticationService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/registrationService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/validationService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/flashMessageService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/timelineService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/meetingService.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/services/teamService.js" type="text/javascript"></script>

    <!-- Directives -->
    <script src="{{ STATIC_URL }}app/directives/fileDirective.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/directives/eventsDirective.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/directives/submitDirective.js" type="text/javascript"></script>
    <!-- Bugfix polymer -->
    <script src="{{ STATIC_URL }}app/directives/showLabelDirective.js" type="text/javascript"></script>

    <!-- Filters -->
    <script src="{{ STATIC_URL }}app/filters/limitFilter.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}app/filters/humanReadableDateFilter.js" type="text/javascript"></script>

    <!-- Interceptors -->
    <script src="{{ STATIC_URL }}app/interceptors/accessInterceptor.js" type="text/javascript"></script>

    <base href="/">

    <!-- Splash screen -->
    <style>
        .splashscreen {
            z-index: 1000;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #009688;
            opacity: 1;
            transition: opacity .5s linear;
        }

        .splashscreen.fade-out {
            opacity: 0;
        }

        .splashscreen > div {
            position: relative;
            top: 50%;
            left: 50%;
            width: 150px;
            margin: -75px;
            text-align: center;
            padding: 25px 0;
            line-height: 35px;
            font-size: 20px;
            color: white;
        }

        .splashscreen img {
            width: 50px;
            height: 50px;
        }

        @-webkit-keyframes pulse {
            40% { font-size: 90px; }
            55% { font-size: 120px; }
            70% { font-size: 90px; }
            85% { font-size: 120px; }
            100% { font-size: 90px; }
        }

        @keyframes pulse {
            40% { font-size: 90px; }
            55% { font-size: 120px; }
            70% { font-size: 90px; }
            85% { font-size: 120px; }
            100% { font-size: 90px; }
        }

        .splashscreen h1 {
            font-size: 90px;
            -webkit-animation: pulse 1.5s infinite; /* Safari 4+ */
            animation:         pulse 1.5s infinite; /* IE 10+, Fx 29+ */
        }
    </style>
    <script>
        function removeSplash() {
            var splash = document.querySelector('.splashscreen');
            splash.parentNode.removeChild(splash);
        }
        function hideSplash() {
            var splash = document.querySelector('.splashscreen');
            splash.classList.add('fade-out');
            splash.addEventListener("transitionend", removeSplash, false);
            splash.addEventListener("webkitTransitionEnd", removeSplash, false);
        }
        var links = document.querySelectorAll('link[rel="import"]');
        var waiting = links.length;
        for (var idx = 0; idx < links.length; idx++) {
            var link = links[idx];
            if (link.import) {
                waiting--;
            } else {
                link.onload = function () {
                    if (--waiting == 0) {
                        setTimeout(function(){
                            hideSplash();
                        }, 500);
                    }
                };
            }
        }
        window.onload = waiting == 0 ? removeSplash : null;
    </script>
</head>
<body ng-app="punktlich" ng-controller="MainController" fullbleed vertical layout>
<div class="splashscreen">
    <noscript>
        <p>
            <strong>Sorry!</strong>
            You need to enable JavaScript to use Punktlich.
            Here are the <a href="http://www.activatejavascript.org/" target="_blank">instructions how to enable JavaScript in your web browser</a>.
        </p>
    </noscript>
    <div>
        <h1>P.</h1>
    </div>
</div>

{% verbatim %}
<paper-toast text="{{ getFlashMessage() }}"></paper-toast>
{% endverbatim %}

<div fit vertical layout ui-view></div>
</body>
</html>